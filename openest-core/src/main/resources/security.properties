#Session\u6709\u6548\u671F
#\u8FD9\u662F\u4E00\u4E2A\u76F8\u5BF9\u503C\uFF0C\u76F8\u5BF9\u4E8E\u7528\u6237\u6700\u540E\u4E00\u6B21\u8BBF\u95EE\u7684\u65F6\u95F4
#\u4E5F\u5C31\u662F\u8BF4\uFF0C\u53EA\u6709\u5F53\u7528\u6237\u8D85\u8FC7\u6B64\u65F6\u95F4\u4E0D\u6D3B\u8DC3\uFF0CSession\u624D\u4F1A\u5931\u6548
#\u5355\u4F4D\u79D2(s)
session.expiresMilliseconds=2592000000
#\u662F\u5426\u542F\u7528Session\u5783\u573E\u56DE\u6536\u5668
session.gc.open=true
#Session\u5783\u573E\u56DE\u6536\u5668Lua\u811A\u672C
session.gc.script=for i=48,83,1 do     local partition     if(i > 57) then         partition = string.char(i + 39)     else         partition = string.char(i)     end          local setkey = 'security:session:set:'..partition     local principals = redis.call('ZRANGEBYSCORE', setkey, '-inf', ARGV[1])     redis.call('ZREMRANGEBYSCORE', setkey, '-inf', ARGV[1])     if(principals and (table.maxn(principals) > 0)) then         for ii,vv in ipairs(principals) do             local hashkey = 'security:session:hash:'..partition             redis.call('HDEL', hashkey, vv)         end     end end
#Session\u5783\u573E\u56DE\u6536\u5668\u6267\u884C\u65F6\u95F4\u95F4\u9694
#\u5355\u4F4D\u79D2(s)
session.gc.gcDelaySecond=86400



#cookie\u540D\u79F0
cookie.name=sid
#cookie\u57DF\u540D
cookie.domain=.cospace.xyz
#cookie\u8DEF\u5F84
cookie.path=/
#\u6B64\u914D\u7F6E\u4E3Atrue\u65F6\uFF0Ccookie\u65E0\u6CD5\u901A\u8FC7js\u811A\u672C\u64CD\u4F5C
cookie.httpOnly=true
#\u662F\u5426\u542F\u7528HTTPS
cookie.secure=true
#cookie\u6709\u6548\u671F\uFF0C\u4E00\u822C\u4E0D\u9700\u8981\u6539\u52A8\uFF0C\u76EE\u524D\u8BBE\u7F6E\u7684\u662F\u6700\u5927\u503C\uFF0C\u76F8\u5F53\u4E8E\u6C38\u4E0D\u8FC7\u671F
#\u56E0\u4E3Acookie\u7684\u751F\u547D\u5468\u671F\u7531\u670D\u52A1\u5668\u7AEF\u7EF4\u62A4\uFF0C\u6240\u4EE5\u5BA2\u6237\u7AEF\u4E0D\u9700\u8981\u5173\u5FC3\u8FC7\u671F\u65F6\u95F4
cookie.maxAge=315360000



#Redis\u5BA2\u6237\u7AEF\u8FDE\u63A5\u5DE5\u5382
#\u8D1F\u8D23\u63D0\u4F9BRedis\u5BA2\u6237\u7AEF\u8FDE\u63A5
common.redisResourceFactory=cc.cospace.web.security.dao.DefaultRedisResourceFactory



#\u5B89\u5168\u7BA1\u7406\u5668\u5B9E\u73B0
core.securityManager=org.yangyuan.security.core.DefaultSecurityManager
#\u5B89\u5168\u552F\u4E00\u6807\u8BC6\u751F\u6210\u5668\u5B9E\u73B0
core.principalFactory=org.yangyuan.security.core.DefaultPrincipalFactory
#\u7F13\u5B58\u7BA1\u7406\u5668\u5B9E\u73B0
core.cacheManager=org.yangyuan.security.core.DefaultCacheManager
#\u662F\u5426\u590D\u7528\u5BA2\u6237\u7AEFsubject
#\u5982\u679C\u8BBE\u4E3Atrue\uFF0C\u5BA2\u6237\u7AEF\u767B\u9646\u65F6\u5982\u679C\u643A\u5E26\u6709subject\u4FE1\u606F\uFF0C\u90A3\u4E48\u590D\u7528\u6B64subject\uFF0C\u4E0D\u518D\u521B\u5EFA\u65B0\u7684subject
#\u5982\u679C\u8BBE\u4E3Afalse\uFF0C\u5219\u767B\u5F55\u65F6\u5FFD\u7565\u5BA2\u6237\u7AEF\u643A\u5E26\u7684subject\u4FE1\u606F\uFF0C\u603B\u662F\u521B\u5EFA\u65B0\u7684subject
core.useClientSubjectLogin=false
#\u5E76\u53D1\u4E3B\u9898\u63A7\u5236\u5668
#[org.yangyuan.security.core.MultiportConcurrentSubjectControl]\u5141\u8BB8\u540C\u4E00\u4E2A\u8D26\u53F7\u540C\u65F6\u5728\u4E0D\u540C\u5BA2\u6237\u7AEF\u767B\u9646
#[org.yangyuan.security.core.SingleConcurrentSubjectControl]\u540C\u4E00\u4E2A\u8D26\u53F7\u540C\u4E00\u65F6\u523B\u53EA\u80FD\u5728\u4E00\u4E2A\u5BA2\u6237\u7AEF\u767B\u9646\uFF0C\u5982\u679C\u4E4B\u524D\u5728\u5176\u4ED6\u5BA2\u6237\u7AEF\u767B\u9646\u8FC7\uFF0C\u90A3\u4E48\u4E4B\u524D\u7684\u767B\u9646\u5C06\u5931\u6548
#[org.yangyuan.security.core.RefuseConcurrentSubjectControl]\u540C\u4E00\u4E2A\u8D26\u53F7\u540C\u4E00\u65F6\u523B\u53EA\u80FD\u5728\u4E00\u4E2A\u5BA2\u6237\u7AEF\u767B\u9646\uFF0C\u5982\u679C\u4E4B\u524D\u5728\u5176\u4ED6\u5BA2\u6237\u7AEF\u767B\u9646\u8FC7\uFF0C\u90A3\u4E48\u672C\u6B21\u767B\u9646\u5C06\u4F1A\u5931\u8D25\uFF0C\u9664\u975E\u5176\u4ED6\u5BA2\u6237\u7AEF\u4E3B\u52A8\u9000\u51FA\u767B\u9646
core.concurrentSubjectControl=org.yangyuan.security.core.MultiportConcurrentSubjectControl
#\u8BA4\u8BC1\u56DE\u8C03
#\u6B64\u5904\u7406\u5668\u7528\u6765\u54CD\u5E94\u8BA4\u8BC1\u7ED3\u679C(\u6210\u529F\u3001\u5931\u8D25\u3001\u62D2\u7EDD\u8BBF\u95EE)
#\u5177\u4F53\u7684\u54CD\u5E94\u4F9D\u8D56\u4E8E\u5177\u4F53\u7684\u4E1A\u52A1\uFF0C\u6846\u67B6\u53EA\u8D1F\u8D23\u901A\u77E5\u8BA4\u8BC1\u7ED3\u679C
core.securityAuthHandler=cc.cospace.web.security.core.DefaultSecurityAuthHandler



#ehcache\u7F13\u5B58\u6570\u636E\u8BBF\u95EE\u5C42(\u7F13\u5B58\u5C42)
dao.ehcacheSessionDao=org.yangyuan.security.dao.EhcacheSessionDao
#redis\u6570\u636E\u8BBF\u95EE\u5C42(\u6301\u4E45\u5316\u5C42)
dao.redisSessionDao=org.yangyuan.security.dao.RedisSessionDao
#\u6301\u4E45\u5316\u6570\u636E\u6E90(\u7528\u6237\u540D\u5BC6\u7801\u6A21\u5F0F)
dao.jdbcRealm=org.yangyuan.security.realm.jdbc.JdbcRealm
#\u6301\u4E45\u5316\u6570\u636E\u6E90(\u9A8C\u8BC1\u7801\u6A21\u5F0F)
dao.captchaRealm=org.yangyuan.security.realm.captcha.CaptchaRealm
#\u7B2C\u4E09\u65B9\u6570\u636E\u6E90
dao.remoteRealm=org.yangyuan.security.realm.remote.RemoteRealm
#\u672C\u5730\u8BA4\u8BC1\u6570\u636E\u8BBF\u95EE\u5C42(\u7528\u6237\u540D\u5BC6\u7801\u6A21\u5F0F)
dao.jdbcSessionDao=org.yangyuan.security.dao.JdbcSessionDao
#\u7B2C\u4E09\u65B9\u767B\u5F55\u8BA4\u8BC1\u6570\u636E\u8BBF\u95EE\u5C42
dao.remoteSessionDao=org.yangyuan.security.dao.RemoteSessionDao
#\u7528\u6237\u540D\u5BC6\u7801\u6A21\u5F0F\u767B\u5F55\u9002\u914D\u5668
#\u6B64\u9002\u914D\u5668\u5B9E\u73B0\u5B89\u5168\u8BA4\u8BC1\u4E0E\u5177\u4F53\u9879\u76EE\u7528\u6237\u6570\u636E\u5B58\u50A8\u4E4B\u95F4\u7684\u89E3\u8026
dao.jdbcRealmAdaptor=userService
#\u9A8C\u8BC1\u7801\u6A21\u5F0F\u767B\u5F55\u9002\u914D\u5668
#\u6B64\u9002\u914D\u5668\u5B9E\u73B0\u5B89\u5168\u8BA4\u8BC1\u4E0E\u5177\u4F53\u9879\u76EE\u7528\u6237\u6570\u636E\u5B58\u50A8\u4E4B\u95F4\u7684\u89E3\u8026
dao.captchaRealmAdaptor=userService
#\u7B2C\u4E09\u65B9\u767B\u5F55\u9002\u914D\u5668
#\u6B64\u9002\u914D\u5668\u5B9E\u73B0\u5B89\u5168\u8BA4\u8BC1\u4E0E\u5177\u4F53\u9879\u76EE\u7528\u6237\u6570\u636E\u5B58\u50A8\u4E4B\u95F4\u7684\u89E3\u8026
dao.remoteRealmAdaptor=userService



#cache\u5728\u5185\u5B58\u4E2D\u6700\u591A\u53EF\u4EE5\u5B58\u653E\u7684\u5143\u7D20\u7684\u6570\u91CF\u3002
#0\u8868\u793A\u6CA1\u6709\u9650\u5236\u3002
#\u5982\u679C\u653E\u5165cache\u4E2D\u7684\u5143\u7D20\u8D85\u8FC7\u8FD9\u4E2A\u6570\u503C\uFF0C\u6709\u4E24\u79CD\u53EF\u80FD\uFF1A
#1\u3001\u82E5overflowToDisk\u7684\u5C5E\u6027\u503C\u4E3Atrue\uFF0C\u4F1A\u5C06cache\u4E2D\u591A\u51FA\u7684\u5143\u7D20\u653E\u5165\u78C1\u76D8\u6587\u4EF6\u4E2D\u3002
#2\u3001\u82E5overflowToDisk\u7684\u5C5E\u6027\u503C\u4E3Afalse\uFF0C\u4F1A\u6839\u636EmemoryStoreEvictionPolicy\u7684\u7B56\u7565\u66FF\u6362cache\u4E2D\u539F\u6709\u7684\u5143\u7D20\u3002
cache.maxElementsInMemory=10000
#\u7F13\u5B58\u662F\u5426\u6C38\u9A7B\u5185\u5B58\u3002
#\u5982\u679C\u503C\u662Ftrue\uFF0Ccache\u4E2D\u7684\u5143\u7D20\u5C06\u4E00\u76F4\u4FDD\u5B58\u5728\u5185\u5B58\u4E2D\uFF0C\u4E0D\u4F1A\u56E0\u4E3A\u65F6\u95F4\u8D85\u65F6\u800C\u4E22\u5931\u3002
#\u56E0\u6B64\u5728\u8FD9\u4E2A\u503C\u4E3Atrue\u7684\u65F6\u5019\uFF0CtimeToIdleSeconds\u548CtimeToLiveSeconds\u4E24\u4E2A\u5C5E\u6027\u7684\u503C\u5C31\u4E0D\u8D77\u4F5C\u7528\u4E86\u3002
cache.eternal=false
#\u5185\u5B58\u4E2D\u7684\u5143\u7D20\u6570\u91CF\u6EA2\u51FA\u662F\u5426\u5199\u5165\u78C1\u76D8\u3002
#\u7CFB\u7EDF\u4F1A\u6839\u636E\u6807\u7B7E<diskStore path="java.io.tmpdir"/>\u4E2Dpath\u7684\u503C\u67E5\u627E\u5BF9\u5E94\u7684\u5C5E\u6027\u503C\u3002
#\u5982\u679C\u7CFB\u7EDF\u7684java.io.tmpdir\u7684\u503C\u662F/temp\uFF0C\u5199\u5165\u78C1\u76D8\u7684\u6587\u4EF6\u5C31\u4F1A\u653E\u5728\u8FD9\u4E2A\u6587\u4EF6\u5939\u4E0B\uFF0C\u6587\u4EF6\u7684\u540D\u79F0\u662Fcache\u7684\u540D\u79F0\uFF0C\u540E\u7F00\u540D\u4E3Adata\u3002
cache.overflowToDisk=false
#\u662F\u5426\u6301\u4E45\u5316\u5185\u5B58\u4E2D\u7684\u7F13\u5B58\u5230\u78C1\u76D8\u3002
#\u5F53\u8FD9\u4E2A\u5C5E\u6027\u7684\u503C\u4E3Atrue\u65F6\uFF0C\u7CFB\u7EDF\u5728\u521D\u59CB\u5316\u7684\u65F6\u5019\u4F1A\u5728\u78C1\u76D8\u4E2D\u67E5\u627E\u6587\u4EF6\u540D\u4E3Acache\u540D\u79F0\uFF0C\u540E\u7F00\u540D\u4E3Aindex\u7684\u7684\u6587\u4EF6\uFF0C\u5982CACHE_FUNC.index\u3002
#\u8FD9\u4E2A\u6587\u4EF6\u4E2D\u5B58\u653E\u4E86\u5DF2\u7ECF\u6301\u4E45\u5316\u5728\u78C1\u76D8\u4E2D\u7684cache\u7684index\uFF0C\u627E\u5230\u540E\u628Acache\u52A0\u8F7D\u5230\u5185\u5B58\u3002
cache.diskPersistent=false
#\u8BBF\u95EEcache\u4E2D\u5143\u7D20\u7684\u6700\u5927\u95F4\u9694\u65F6\u95F4\u3002
#\u5982\u679C\u8D85\u8FC7\u6B64\u65F6\u95F4cache\u4E2D\u7684\u67D0\u4E2A\u5143\u7D20\u6CA1\u6709\u4EFB\u4F55\u8BBF\u95EE\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u5143\u7D20\u5C06\u88AB\u4ECEcache\u4E2D\u6E05\u9664\u3002
cache.timeToIdleSeconds=900
#cache\u4E2D\u5143\u7D20\u7684\u603B\u751F\u5B58\u65F6\u95F4\uFF0Ccache\u4E2D\u7684\u67D0\u4E2A\u5143\u7D20\u4ECE\u521B\u5EFA\u5230\u6D88\u4EA1\u7684\u65F6\u95F4\u3002
#\u4ECE\u521B\u5EFA\u5F00\u59CB\u8BA1\u65F6\uFF0C\u5F53\u8D85\u8FC7\u8FD9\u4E2A\u65F6\u95F4\uFF0C\u8FD9\u4E2A\u5143\u7D20\u5C06\u88AB\u4ECEcache\u4E2D\u6E05\u9664\uFF0C\u5373\u4FBF\u662F\u8FD9\u4E2A\u5143\u7D20\u88AB\u9891\u7E41\u8BBF\u95EE\u3002
cache.timeToLiveSeconds=7200
#\u5185\u5B58\u5B58\u50A8\u4E0E\u91CA\u653E\u6E05\u7406\u7B56\u7565
#LRU\u6700\u8FD1\u6700\u5C11\u4F7F\u7528
#LFU\u5386\u53F2\u8BBF\u95EE\u9891\u7387\u6700\u4F4E
#FIFO\u5148\u8FDB\u5148\u51FA
cache.memoryStoreEvictionPolicy=LRU



#\u666E\u901A\u9A8C\u8BC1\u7801\u6709\u6548\u671F
#\u5355\u4F4Ds
captcha.normal.expireSecond=900
#\u666E\u901A\u9A8C\u8BC1\u7801\u591A\u6B21\u53D1\u9001\u6700\u77ED\u65F6\u95F4\u95F4\u9694
#\u5355\u4F4Ds
captcha.normal.minIntervalSecond=50
#\u56FE\u5F62\u9A8C\u8BC1\u7801\u6709\u6548\u671F
#\u5355\u4F4Ds
captcha.image.expireSecond=600
#\u56FE\u5F62\u9A8C\u8BC1\u7801\u9519\u8BEF\u7EDF\u8BA1\u5468\u671F
#\u5355\u4F4Ds
captcha.image.wrongPeriodSecond=60
#\u56FE\u5F62\u9A8C\u8BC1\u7801\u7EDF\u8BA1\u5468\u671F\u5185\u5141\u8BB8\u6700\u5927\u9519\u8BEF\u6B21\u6570
captcha.image.periodMaxWrongCount=3





